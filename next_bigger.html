<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <link rel="stylesheet" href="style.css">
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
  <title>Next Bigger Number</title>
</head>
<body>
<div class="container">
  <div class="dropdown">
    <button class="btn btn-success dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
      Magdas Code
    </button>
  <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
      <a class="dropdown-item" href="queermed.html">queermed.info</a>
      <a class="dropdown-item" href="instrumentalize.html">instrumentalize.me</a>
      <a class="dropdown-item" href="ms_cocktail.html">Ms. Cocktail</a>
      <a class="dropdown-item" href="best_travel.html">Best Travel</a>
      <a class="dropdown-item" href="next_bigger.html">Next bigger number with the same digits</a>
    </div>
  </div>

  <div class="header">
    <h3>Next bigger number with the same digits</h3>
</div>
  <a href="next_bigger.rb" download>oder klicke um den Code für den Editor zu laden</a>

  <div class="description">
    <h5>Aufgabe</h5>
    Create a function that takes a positive integer and returns the next bigger number that can be formed by rearranging its digits. For example:<br>

    <code>12 ==> 21</code><br>
    <code>513 ==> 531</code><br>
    <code>2017 ==> 2071</code><br>
    <code>nextBigger(num: 12)</code>   // returns 21<br>
    <code>nextBigger(num: 513)</code>  // returns 531<br>
    <code>nextBigger(num: 2017)</code> // returns 2071<br>
    If the digits can't be rearranged to form a bigger number, return -1 (or nil in Swift):<br>
    <code>9 ==> -1</code><br>
    <code>111 ==> -1</code><br>
    <code>531 ==> -1</code><br>
    <code>nextBigger(num: 9)</code>   // returns nil<br>
    <code>nextBigger(num: 111)</code> // returns nil<br>
    <code>nextBigger(num: 531)</code> // returns nil<br>
  </div>
  <div class="test">
    <h5>Unit Tests</h5>
    <pre>
Test.assert_equals(next_bigger(12),21)
Test.assert_equals(next_bigger(513),531)
Test.assert_equals(next_bigger(2017),2071)
Test.assert_equals(next_bigger(414),441)
Test.assert_equals(next_bigger(144),414)
    </pre>
  </div>
  <div class="solution">
    <h5>Magdas Lösungsansatz mit Ruby</h5>

    <pre>
<span class="code-comment"># define the method swap! that swaps the argument input</span>
def swap!(a, b)
class Array
    self[a], self[b] = self[b], self[a]
    self
  end
end

def swap_special_case(array)
  <span class="code-comment"># special case: there is no bigger number,</span>
  <span class="code-comment"># return -1</span>
  return -1 if array.sort.reverse == array
  <span class="code-comment"># special case: array is in ascending order and there are no doublicate numbers,</span>
  <span class="code-comment"># swap second last and last value, use return to stop program</span>
  return array.swap!(-1, -2).join.to_i if array.sort == array && array.uniq.count == array.count
  <span class="code-comment"># special case: array has 3 values or less, second last and last value are the same</span>
  <span class="code-comment"># swap third and second last value, use return to stop program</span>
  return array.swap!(-2, -3).join.to_i if array[-1] == array[-2] && array.count <= 3
end

def swap_not_special_case(array)
  i = 1
  while i < array.count
    <span class="code-comment"># look from right side for the first value that is bigger than the previous one (left side)</span>
    if array[-i] > array[-i - 1]
      <span class="code-comment"># range from -i till the last value, save range as until_last, sort it</span>
      until_last = array[-i.. - 1].sort
      <span class="code-comment"># find index of value to be switched</span>
      to_switch = (until_last.find_index(until_last.detect { |x| x > array[-1-i] }) - until_last.count)
      <span class="code-comment"># return range of array from left side beginning until value before -1</span>
      <span class="code-comment"># instert until_last in the previous</span>
      <span class="code-comment"># flatten this array and switch</span>
      <span class="code-comment"># return integer</span>
      return array[0..-i - 1].push(until_last).flatten.swap!(-i - 1, to_switch).join.to_i
    end
    i += 1
  end
end

def next_bigger(n)
  <span class="code-comment"># transform integer to array of digits, store in variable array</span>
  array = n.to_s.chars.map(&:to_i)
  <span class="code-comment"># perform swap if special case</span>
  if array.sort.reverse == array ||
    array.sort == array && array.uniq.count == array.count ||
    array[-1] == array[-2] && array.count <= 3
    swap_special_case(array)
    <span class="code-comment"># perform swap if not special case</span>
  else swap_not_special_case(array)
  end
end
    </pre>
  </div>
  <div class="comment">
    <h5>Kommentar zu meinem Lösungsansatz</h5>
    Diese Aufgabenstellung ist recht einfach zu verstehen, die Umsetzung hingegen komplexer.
    Mein Ansatz war, eine Methode <code>.swap!</code> für das Vertauschen von Values in einem Array zu haben.
    Des weiteren filtere ich mit einer Methode (if Statement) die Special Cases heraus und
    finde für diese Fälle die nächst größere Zahl.
    In einer weiteren Methode mit einem While Loop und einem darin genesteten
    if Statement überprüfe ich vom Ende des Integers (als Array) her, welche Ziffer es zu tauschen gilt.
    Die next_bigger() Methode führt die drei oben genannten Methoden zusammen.
    Dieser Lösungsansatz hat alle Tests und Attempts auf Codewars bestanden.
  </div>
  <div class="footer">
    Next bigger number with the same digits ist eine Coding Challenge auf <a href="https://www.codewars.com/kata/55983863da40caa2c900004e" target="_blank">codewars.com</a>
  </div>
</div>
</body>
</html>

